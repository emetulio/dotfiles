#!/bin/sh

# searchAinB.sh
# search the list A in list B, where:
# A is the first argument, A is a filename containing a list of words, one word per line
# B is the second argument, B is a filename containing a list of words, one word per line

# One can understand the result of this script as:
# the list of words that exists in A but do not exist in B


# if there are not 2 arguments, exit
if [ $# -lt 2 ]; then
    echo " usage:" $0 "<filelist1> <filelist2>"
    echo
    exit 1
fi

# if one of the files are missing, exit
for i in $@
do
    if [ ! -e $i ]; then
        echo "file <"$i"> does not exist"
        echo
        exit 2
    fi
done

tmpfile1=$1.$$
tmpfile2=$2.$$

# perform the following 3 tasks for the 2 files given as arguments:
# 1 - delete [:space:] at the beggining, and at the end (sed)
# 2 - split multiple words in multiple lines, allow only one word per line (tr)
# 3 - sort the lines, and delete dups (sort)
sed -e 's/^[[:blank:]]*//;s/[[:blank:]]*$//' $1 | tr ' ' '\n' | sort -u > $tmpfile1
sed -e 's/^[[:blank:]]*//;s/[[:blank:]]*$//' $2 | tr ' ' '\n' | sort -u > $tmpfile2

# search elements from A in B, report the missing ones
grep -xvf $tmpfile2 $tmpfile1

# delete temp files
rm $tmpfile1 $tmpfile2

exit 0

